<?php
include('connProd.php') ;
$iccid[]=array("8997112212755269090", "8997112212750887421", "8997112212750887436", "8997112212750834264", "8997112212761270599", "8997112212750888383", "8997112212750890263", "8997112212750887462", "8997112212760196320", "8997112212750890215", "8997112212750830540", "8997112212750886969", "8997112212760196390", "8997112212750831231", "8997112212760196319", "8997112212760197070", "8997112212760196360", "8997112212750888356", "8997112212760195408", "8997112212760197068", "8997112212750837368", "8997112212760353993", "8997112212760194509", "8997112212760194475", "8997112212760328915", "8997112212760196367", "8997112212761256317", "8997112212760194578", "8997112212760197079", "8997112212760194510", "8997112212760197072", "8997112212760196322", "8997112212760196396", "8997112212760330950", "8997112212760195438", "8997112212761255056", "8997112212748101857", "8997112212748103689", "8997112212748098316", "8997112212748098328", "8997112212748099676", "8997112212750830535", "8997112212748101879", "8997112212748106050", "8997112212748098351", "8997112212748094211", "8997112212748103702", "8997112212748099754", "8997112212748103757", "8997112212748094147", "8997112212748099695", "8997112212748099673", "8997112212748103682", "8997112212748103719", "8997112212748098356", "8997112212748107992", "8997112212748098341", "8997112212748101829", "8997112212748108069", "8997112212748096574", "8997112212748101823", "8997112212748101859", "8997112212748097104", "8997112212748094148", "8997112212748097171", "8997112212748096575", "8997112212748106057", "8997112212748096557", "8997112212748098348", "8997112212748098308", "8997112212748098357", "8997112212748103752", "8997112212748099713", "8997112212748099669", "8997112212748108052", "8997112212748099678", "8997112212748101822", "8997112212748106085", "8997112212748103696", "8997112212748099717", "8997112212748101840", "8997112212748096559", "8997112212748103684", "8997112212748103746", "8997112212748098346", "8997112212748106087", "8997112212748103701", "8997112212748101824", "8997112212748103699", "8997112212750837373", "8997112212748108021", "8997112212748108073", "8997112212748106069", "8997112212748108024", "8997112212748094224", "8997112212748098349", "8997112212748101819", "8997112212748098329", "8997112212748099681", "8997112212748103720", "8997112212748108011", "8997112212748097140", "8997112212748097116", "8997112212748097170", "8997112212748097117", "8997112212748101872", "8997112212748094244", "8997112212748103685", "8997112212748101818", "8997112212750890255", "8997112212748094150", "8997112212748094219", "8997112212748103694", "8997112212748096570", "8997112212748094206", "8997112212748106081", "8997112212748101893", "8997112212748098317", "8997112212748097101", "8997112212748106073", "8997112212748108012", "8997112212748103748", "8997112212748103680", "8997112212748108000", "8997112212748106079", "8997112212748098310", "8997112212748099704", "8997112212748094152", "8997112212748108013", "8997112212748097100", "8997112212748097138", "8997112212748108065", "8997112212748108022", "8997112212748097142", "8997112212748101828", "8997112212748099744", "8997112212748094172", "8997112212748103731", "8997112212748108045", "8997112212748097097", "8997112212748096565", "8997112212748099733", "8997112212748096577", "8997112212748101906", "8997112212748103717", "8997112212748096571", "8997112212748106049", "8997112212748108037", "8997112212748099674", "8997112212748098371", "8997112212748103760", "8997112212748103722", "8997112212748108036", "8997112212748103744", "8997112212750843658", "8997112212748097111", "8997112212748094230", "8997112212748099734", "8997112212748103711", "8997112212748097098", "8997112212748096581", "8997112212748101826", "8997112212748098340", "8997112212748094170", "8997112212748108034", "8997112212748097156", "8997112212748099748", "8997112212748094227", "8997112212748103753", "8997112212748101858", "8997112212748099694", "8997112212748098372", "8997112212748099692", "8997112212748108067", "8997112212748099679", "8997112212748094158", "8997112212748103692", "8997112212748099723", "8997112212748094149", "8997112212748103667", "8997112212748097155", "8997112212748096580", "8997112212748106061", "8997112212748097123", "8997112212748097180", "8997112212748099683", "8997112212748098353", "8997112212748096579", "8997112212748094167", "8997112212748108009", "8997112212748098360", "8997112212748101835", "8997112212748101827", "8997112212748094223", "8997112212748097102", "8997112212748101856", "8997112212748094218", "8997112212748108010", "8997112212748108084", "8997112212748097189", "8997112212748098358", "8997112212748106060", "8997112212748094153", "8997112212748098337", "8997112212748103681", "8997112212748101890", "8997112212748094146", "8997112212748103688", "8997112212748094143", "8997112212748098352", "8997112212748098339", "8997112212748103677", "8997112212748107996", "8997112212748097177", "8997112212748094200", "8997112212748099705", "8997112212748108082", "8997112212748094151", "8997112212748098324", "8997112212748101895", "8997112212748097121", "8997112212748097169", "8997112212748108023", "8997112212761270155", "8997112212750842061", "8997112212750889286", "8997112212750836184", "8997112212750838683", "8997112212750838687", "8997112212750842049", "8997112212750838763", "8997112212750889277", "8997112212750887422", "8997112212750831262", "8997112212750888378", "8997112212750838727", "8997112212750842027", "8997112212750843648", "8997112212750838674", "8997112212750837457", "8997112212750836194", "8997112212750843647", "8997112212750836175", "8997112212750834290", "8997112212750890256", "8997112212750887445", "8997112212750890240", "8997112212750842902", "8997112212750831242", "8997112212750835438", "8997112212750829874", "8997112212750886470", "8997112212750838720", "8997112212750838744", "8997112212750842873", "8997112212750831229", "8997112212750836200", "8997112212750838745", "8997112212750838728", "8997112212750838691", "8997112212750834309", "8997112212750842892", "8997112212750890250", "8997112212750886475", "8997112212750836171", "8997112212750835423", "8997112212750838735", "8997112212750886489", "8997112212750832961", "8997112212750836169", "8997112212750887428", "8997112212750840958", "8997112212750836203", "8997112212750837364", "8997112212750842879", "8997112212750838667", "8997112212750832958", "8997112212750831301", "8997112212750890249", "8997112212750890262", "8997112212750838758", "8997112212750834311", "8997112212750831240", "8997112212750838742", "8997112212750831227", "8997112212750842869", "8997112212750838760", "8997112212750887440", "8997112212750831249", "8997112212750830539", "8997112212750842048", "8997112212750842043", "8997112212750890261", "8997112212750838676", "8997112212750838748", "8997112212750842877", "8997112212750886486", "8997112212750829867", "8997112212750836174", "8997112212750837371", "8997112212750886983", "8997112212750887460", "8997112212750842060", "8997112212750886966", "8997112212750840923", "8997112212750842875", "8997112212750886484", "8997112212750890257", "8997112212750842887", "8997112212750838685", "8997112212750834306", "8997112212750887008", "8997112212750842874", "8997112212750890258", "8997112212750843654", "8997112212750888380", "8997112212750842871", "8997112212750830527", "8997112212750843675", "8997112212750838732", "8997112212750842050", "8997112212750842870", "8997112212750887004", "8997112212750831250", "8997112212750838705", "8997112212750838736", "8997112212750830525", "8997112212750887452", "8997112212750890227", "8997112212750834287", "8997112212750888371", "8997112212750842876", "8997112212750836172", "8997112212750836167", "8997112212750889261", "8997112212750838692", "8997112212750838668", "8997112212750831266", "8997112212750887426", "8997112212750842872", "8997112212750836209", "8997112212750843659", "8997112212750887009", "8997112212750889287", "8997112212750831302", "8997112212750838730", "8997112212750890226", "8997112212750842054", "8997112212750830528", "8997112212750829898", "8997112212750886513", "8997112212750836204", "8997112212750830533", "8997112212750835448", "8997112212750829870", "8997112212750838755", "8997112212750887434", "8997112212750843665", "8997112212750836164", "8997112212750840963", "8997112212750834289", "8997112212750830529", "8997112212750830531", "8997112212750838739", "8997112212750838686", "8997112212750838678", "8997112212750837379", "8997112212750837394", "8997112212750832937", "8997112212750831265", "8997112212750842025", "8997112212750842032", "8997112212750834295", "8997112212750835458", "8997112212750834298", "8997112212750838669", "8997112212750830522", "8997112212750831237", "8997112212750834304", "8997112212750836205", "8997112212750838689", "8997112212750887007", "8997112212750886508", "8997112212750829881", "8997112212750829913", "8997112212750837392", "8997112212750890219", "8997112212750834278", "8997112212750837443", "8997112212750838743", "8997112212750842030", "8997112212750888362", "8997112212750894229", "8997112212750891346", "8997112212753976985", "8997112212753979194", "8997112212753980838", "8997112212750894242", "8997112212753978080", "8997112212750894529", "8997112212750883064", "8997112212753978084", "8997112212753975778", "8997112212750894555", "8997112212753978471", "8997112212750883089", "8997112212753978483", "8997112212753980836", "8997112212753979218", "8997112212750896297", "8997112212753979221", "8997112212753976953", "8997112212753975773", "8997112212753979206", "8997112212750894588", "8997112212750895773", "8997112212753979208", "8997112212753975769", "8997112212753981409", "8997112212753976972", "8997112212753982491", "8997112212750883074", "8997112212750894490", "8997112212750891335", "8997112212750895793", "8997112212750894567", "8997112212750894249", "8997112212750894241", "8997112212753980817", "8997112212753975767", "8997112212753983859", "8997112212753982525", "8997112212753975782", "8997112212750884331", "8997112212750894528", "8997112212753980821", "8997112212750894217", "8997112212753975798", "8997112212753982518", "8997112212750895794", "8997112212753979200", "8997112212750894495", "8997112212753976951", "8997112212753975799", "8997112212750894515", "8997112212753978082", "8997112212750883105", "8997112212750895792", "8997112212753978492", "8997112212750891330", "8997112212750884350", "8997112212750895778", "8997112212750894223", "8997112212753978083", "8997112212750894262", "8997112212750883076", "8997112212750894231", "8997112212750883070", "8997112212750884329", "8997112212753982502", "8997112212750895805", "8997112212753979207", "8997112212750894539", "8997112212753980840", "8997112212753975764", "8997112212753975770", "8997112212753980839", "8997112212753979195", "8997112212750894556", "8997112212753979192", "8997112212750896274", "8997112212753980848", "8997112212750884347", "8997112212750894579", "8997112212750894517", "8997112212750891350", "8997112212753980837", "8997112212753978484", "8997112212753979202", "8997112212750891345", "8997112212750891340", "8997112212750884330", "8997112212750883085", "8997112212753979203", "8997112212750894578", "8997112212753982526", "8997112212753979193", "8997112212753975776", "8997112212750895771", "8997112212750896306", "8997112212750894230", "8997112212750883108", "8997112212750894259", "8997112212753980847", "8997112212750895786", "8997112212753982528", "8997112212750884348", "8997112212750883069", "8997112212750894572", "8997112212750884324", "8997112212750891332", "8997112212754005515", "8997112212753988747", "8997112212753985031", "8997112212753985015", "8997112212753986511", "8997112212754007170", "8997112212754003636", "8997112212754008937", "8997112212754010252", "8997112212754004624", "8997112212753998215", "8997112212753999095", "8997112212753984988", "8997112212754003616", "8997112212754007201", "8997112212753998212", "8997112212754000978", "8997112212754010269", "8997112212754007695", "8997112212754000970", "8997112212753998188", "8997112212754007727", "8997112212754000968", "8997112212754003177", "8997112212754003624", "8997112212754008968", "8997112212754009850", "8997112212754008377", "8997112212753998214", "8997112212753983885", "8997112212753986498", "8997112212753989597", "8997112212754008368", "8997112212754010258", "8997112212754011283", "8997112212753989605", "8997112212754003648", "8997112212754009858", "8997112212754008970", "8997112212754001812", "8997112212754003149", "8997112212754010267", "8997112212753998193", "8997112212754008381", "8997112212754007172", "8997112212754007208", "8997112212754011257", "8997112212753998225", "8997112212754003611", "8997112212753988773", "8997112212753997152", "8997112212754009818", "8997112212753998217", "8997112212754009843", "8997112212753986512", "8997112212753988782", "8997112212753990054", "8997112212753987279", "8997112212753988766", "8997112212753988768", "8997112212754000955", "8997112212754008376", "8997112212754007693", "8997112212754003183", "8997112212753997149", "8997112212754007691", "8997112212754000979", "8997112212754000966", "8997112212754000303", "8997112212754003658", "8997112212754000959", "8997112212754000949", "8997112212754001839", "8997112212754000269", "8997112212753999064", "8997112212754003619", "8997112212753988738", "8997112212753990067", "8997112212753986151", "8997112212753988785", "8997112212753986143", "8997112212753989598", "8997112212754003657", "8997112212753998213", "8997112212754003646", "8997112212754008965", "8997112212754003139", "8997112212754003653", "8997112212753988767", "8997112212753988751", "8997112212754000972", "8997112212754007207", "8997112212754007174", "8997112212754010251", "8997112212754000293", "8997112212754010270", "8997112212753986533", "8997112212753986499", "8997112212753988744", "8997112212754008941", "8997112212754008980", "8997112212754007169", "8997112212754000976", "8997112212753985035", "8997112212753987275", "8997112212753989592", "8997112212753987283", "8997112212755269657", "8997112212755269079", "8997112212760197102", "8997112212755269119", "8997112212755266175", "8997112212755266193", "8997112212760194570", "8997112212760194479", "8997112212755269634", "8997112212755269087", "8997112212755271249", "8997112212760197069", "8997112212760594162", "8997112212755266177", "8997112212760196325", "8997112212760194529", "8997112212755269093", "8997112212760194530", "8997112212755266176", "8997112212755266173", "8997112212760194567", "8997112212755269089", "8997112212755272022", "8997112212761257476", "8997112212755272042", "8997112212755269073", "8997112212755265012", "8997112212755266174", "8997112212755266220", "8997112212760194561", "8997112212755266178", "8997112212755269101", "8997112212755269624", "8997112212760330940", "8997112212760330407", "8997112212761254095", "8997112212760329587", "8997112212760328912", "8997112212760330945", "8997112212760328974", "8997112212760329584", "8997112212761255132", "8997112212760331949", "8997112212760328819", "8997112212761255139", "8997112212760329003", "8997112212760329586", "8997112212760591807", "8997112212761255149", "8997112212760331358", "8997112212761257506", "8997112212761257504", "8997112212761256550", "8997112212760593909", "8997112212760594174", "8997112212760592524", "8997112212761255131", "8997112212761257468", "8997112212760593056", "8997112212761256311", "8997112212760594273", "8997112212761257495", "8997112212761255111", "8997112212761255145", "8997112212761256314", "8997112212761257465", "8997112212760591717", "8997112212760591721", "8997112212761255118", "8997112212761258006", "8997112212761255140", "8997112212760591716", "8997112212761255136", "8997112212761254176", "8997112212760591734", "8997112212761255116", "8997112212761255112", "8997112212760594160");
for ($i=0;$i<=count($iccid[0]);$i++){
    $update  = $session->execute("UPDATE sim_cards SET status ='retired' WHERE (iccid = '".$iccid[0][$i]."')");
    $curl = curl_init();
    curl_setopt_array($curl, array(
        CURLOPT_URL => 'https://restapi4.jasper.ae/rws/api/v1/devices/'.$iccid[0][$i],
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_ENCODING => '',
        CURLOPT_MAXREDIRS => 10,
        CURLOPT_TIMEOUT => 0,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
        CURLOPT_CUSTOMREQUEST => 'PUT',
        CURLOPT_POSTFIELDS =>'{
            "status": "RETIRED"
        }',
        CURLOPT_HTTPHEADER => array(
            'Authorization: Basic RU1jb2RlOjQ2YjFmYzQzLTFkNGMtNDg4NS1hZmI1LTRlNzYzZDFkOWUzNA==',
            'Content-Type: application/json',
            'Cookie: JSESSIONID=E2F56995FF38010A0DF3FCF34D5FB210; BIGipServer~Control_Center~POOL_POD4_RWS=!o/UypoTKTj6QWfZMDTqO4P+EVERACo/imLSyfq4eWtH+kiyNO7sSVZPrUsgMy+aszRRNhtpYHURjtFmC5B4gb2tk4b/LhpbaBHg0w013Jw+lwg=='
        ),
        ));
    
        $response = curl_exec($curl);
        echo $response;
        curl_close($curl);
    echo "Status updated <br>";
}
?>